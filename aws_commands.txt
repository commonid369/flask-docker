sudo apt-get update
python3  -V
------------------------------------------------------
touch index.html
---------------------------------------
cp /mnt/c/Users/Amit/Desktop/aws/flask3.pem /home/amit/aws

-----------------------------------------------------
cp /mnt/c/Users/Amit/Desktop/aws/flask6.pem /home/amit/aws

cp /mnt/c/Users/Amit/Documents/MLprojects/ic/idx_to_word.pkl /home/amit/ic

cp /home/amit/ic/idx_to_word.pkl /home/ubuntu/flaskapp

cp /mnt/c/Users/Amit/Documents/MLprojects/ic/idx_to_word.pkl /home/amit/aws

chmod 400 flask6.pem

scp -i /home/amit/aws/flask3.pem /home/amit/ic/idx_to_word.pkl 
ubuntu@3.22.136.16.compute-1.amazonaws.com:/home/ubuntu/flaskapp

---------------------------------------------------
scp -i flask3.pem /mnt/c/Users/Amit/Documents/MLprojects/ic/caption_it.py ubuntu@3.22.136.16:/home/ubuntu/flaskapp
------------------------------------------------------------
ssh ubuntu@ec2-18-191-212-30.us-east-2.compute.amazonaws.com
sudo ssh -i flask6.pem ubuntu@3.129.68.146

sudo apt-get upd
sudo apt-get install nginx
sudo apt-get install gunicorn3

cd /etc/nginx/sites-enabled/

sudo rm -r default - (2 flask app)

sudo vim flaskapp

server{
	listen 80;
	server_name 18.220.116.59;


	location / {

----------------------------------------------------
for redirecting local host issue add one lin
proxy_set_header Host $host;
--------------------------------------------------------

		proxy_pass http://127.0.0.1:8000;
	}
}

sudo systemctl daemon-reload
sudo service nginx restart 
sudo service flaskapp restart 
sudo service gunicorn3 restart 
sudo service nginx status 
sudo service gunicorn3 status 

gunicorn3 app:app

-----------------------------------------------

cd /etc/systemd/system/


sudo vim gunicorn3.service

[Unit]
Description=Gunicorn service
After=network.target

[Service]
User=ubuntu
Group=www-data
WorkingDirectory=/home/ubuntu/flaskapp
ExecStart=/usr/bin/gunicorn3 --workers 3 --bind unix:flaskapp.sock -m 007 app:app 

sudo systemctl daemon-reload

sudo service gunicorn3 start
sudo service gunicorn3 status

which gunicorn3

pwd
cd 
cd /etc/nginx/sites-enabled/
ls
sudo vim flaskapp


proxy_pass http://unix:/home/ubuntu/flaskapp/flaskapp.sock;

sudo systemctl daemon-reload
sudo service gunicorn3 start
------------------------------------------------
sudo systemctl daemon-reload
sudo service nginx restart
sudo service gunicorn3 restart
sudo service nginx status
sudo service gunicorn3 status

Elastic ip: 3.22.136.16

----------------------------------------------------------------------------

sudo apt-get update

sudo apt-get install openssl

listen 443 ssl

ssl on;
ssl_certificate /etc/ssl/certs/nginx-self-signed.crt;
ssl_certificate_key /etc/ssl/private/nginx-self-signed.key; 

-----------------------------------------------------
Run services on instance startup | userdata

#cloud-boothook
#!/bin/bash
service flaskservice restart
service nginx restart

------------------------------------------------------------
ssh -i "flask6.pem" ubuntu@ec2-18-191-212-30.us-east-2.compute.amazonaws.com